var masterModule;(function(n){var t=function(t){$("#rightContent div:first").html(n.totalResult(t))};n.masterController=function(t,i){app.ws.bind("Sink.Read",function(n){$.each(n,function(n,i){t.remoteGames.push({guid:i.Key,maxWin:i.JSON.maxWin,totalGames:i.JSON.totalGames,totalSpent:i.JSON.totalSpent,totalWin:i.JSON.totalWin})}),app.localPublish("remote",t.remoteGames)}),app.ws.bind("Sink.Create",function(n){t.guid=n.Key}),app.localSubscribe("remote",function(n){var i="";n.sort(function(n,t){return n.totalSpent-n.totalWin-(t.totalSpent-t.totalWin)}),$.each(n,function(n,r){var u=n+1;i+=r.guid==t.guid?"<p><strong>"+u+". Result: "+(r.totalWin-r.totalSpent).toString()+" Spent: "+r.totalSpent.toString()+" Won: "+r.totalWin.toString()+" max win:"+r.maxWin.toString()+"<\/strong><\/p>":"<p>"+u+". Result: "+(r.totalWin-r.totalSpent).toString()+" Spent: "+r.totalSpent.toString()+" Won: "+r.totalWin.toString()+" max win:"+r.maxWin.toString()+"<\/p>"}),$("#remoteResults").html(i)}),$(function(){return setTimeout(function(){app.ws.trigger("Sink.Read",{model:"result-triss"}),$("#addgame").show()},2e3)}),app.localSubscribe("ticketResult",function(){n.refreshTotalResult(t);var i=t.totalResult();i.guid==null?app.ws.trigger("Sink.Create",{Type:"result-triss",JSON:i}):app.ws.trigger("Sink.Update",{Key:i.guid,JSON:i}),app.ws.trigger("result",i)}),app.ws.bind("result",function(n){t.newRemoteResult(n)}),$.each(t.games,function(n,t){t.render($("<div><\/div>").appendTo("#leftContent"))});i.$el.find("button").on("click",function(){var i=new gameModule.GameRenderer;i.render($("<div><\/div>").appendTo("#leftContent")),t.games.push(i),n.refreshTotalResult(t)})}})(masterModule||(masterModule={}))