var __extends=this.__extends||function(n,t){function i(){this.constructor=n}i.prototype=t.prototype,n.prototype=new i},gameModule;(function(n){var t=function(){function n(n){this.boughtTickets=0,this.autoBuyIntervalId=null,this.wonMoney=0,this.ticketPrice=n,this.lastTicketResult="",this.lastTicketWin=0,this.maxWin=0,this.winMatrix=[{fromTicketNumber:1999999,totalTickets:1,winAmount:2765e3},{fromTicketNumber:1999998,totalTickets:1,winAmount:1e6},{fromTicketNumber:1999993,totalTickets:5,winAmount:265e3},{fromTicketNumber:1999992,totalTickets:1,winAmount:2e5},{fromTicketNumber:1999990,totalTickets:2,winAmount:1e5},{fromTicketNumber:1999988,totalTickets:2,winAmount:2e4},{fromTicketNumber:1999948,totalTickets:40,winAmount:1e4},{fromTicketNumber:1999918,totalTickets:30,winAmount:5e3},{fromTicketNumber:1999848,totalTickets:70,winAmount:2e3},{fromTicketNumber:1999768,totalTickets:80,winAmount:1500},{fromTicketNumber:1999603,totalTickets:165,winAmount:1e3},{fromTicketNumber:1999503,totalTickets:100,winAmount:900},{fromTicketNumber:1999303,totalTickets:200,winAmount:600},{fromTicketNumber:1998993,totalTickets:310,winAmount:500},{fromTicketNumber:1998043,totalTickets:950,winAmount:300},{fromTicketNumber:1996843,totalTickets:1200,winAmount:180},{fromTicketNumber:1993083,totalTickets:3760,winAmount:150},{fromTicketNumber:1985883,totalTickets:7200,winAmount:120},{fromTicketNumber:1956083,totalTickets:29800,winAmount:90},{fromTicketNumber:1747283,totalTickets:208800,winAmount:60},{fromTicketNumber:1567583,totalTickets:179700,winAmount:30}]}return n.prototype.buyTicket=function(){var u,t;this.boughtTickets+=1;var i=this.winMatrix[0].fromTicketNumber+this.winMatrix[0].totalTickets,r=Math.floor(Math.random()*i),n=0;for(u in this.winMatrix)if(t=this.winMatrix[u],r>=t.fromTicketNumber){n=t.winAmount;break}return n>0?(this.lastTicketResult="Win "+n,this.wonMoney+=n,n>this.maxWin&&(this.maxWin=n)):this.lastTicketResult="No win",this.lastTicketWin=n,amplify.publish("ticketResult",this),n},n.prototype.result=function(){return this.wonMoney-this.spentMoney()},n.prototype.spentMoney=function(){return this.boughtTickets*this.ticketPrice},n}();n.GameModel=t;var i=function(n){return DIV(H3("Another game"),n)},r=function(n){return i(DIV(P("Spent money : ",SPAN(n.spentMoney()),P("Max win : ",SPAN(n.maxWin)),P("Won money : ",SPAN(n.wonMoney)),P("Result : ",SPAN(n.result()),DIV(BUTTON("Get me another lottery ticket")),DIV(n.autoBuyIntervalId!=null?INPUT({type:"checkbox",checked:"checked"}):INPUT({type:"checkbox"}),LABEL("Auto buy")),DIV(SPAN(n.lastTicketResult))))))},u=function(n,t){t.$el.find("input").on("change",function(i){i.target.checked?n.autoBuyIntervalId=setInterval(function(){n.buyTicket(),t.render()},1e3):(clearInterval(n.autoBuyIntervalId),n.autoBuyIntervalId=null)});t.$el.find("button").on("click",function(){n.buyTicket(),t.render()})},f=function(n){function i(){var i=new t(30);n.call(this,r,i,u)}return __extends(i,n),i}(ViewRenderer);n.GameRenderer=f})(gameModule||(gameModule={}))